# 探索者ランクシステム計画

> **ステータス**: 設計完了・未実装
> **最終更新**: 2026-02-14
> **目的**: CoC TRPGプレイヤーが「シナリオ記録を登録すること」にモチベーションを感じるゲーミフィケーション

---

## 設計思想

- **登録行動にフォーカス** — シナリオをプレイすることではなく、記録を残すことを動機づける
- **ポイント制** — 柔軟性があり、イベントやキャンペーンに対応できる
- **高ランクほど貢献が必要** — 序盤は気軽に、上位はコミュニティ貢献が必須
- **長期目標** — 最上位は数年単位の活動が必要。「いつか辿り着ければいいな」という感覚
- **CoC 世界観** — ランク名はクトゥルフ神話 TRPG の雰囲気に合わせる

---

## ポイントシステム

### 基本ポイント配分

| アクション | 獲得ポイント | 備考 |
|-----------|-------------|------|
| シナリオ登録 | **10pt** | レポートを1件登録する（コア行動） |
| 充実レポートボーナス | **+5pt** | 充実レポートの条件を満たした場合（後述） |
| レポート公開 | **+3pt** | レポートを公開設定にした場合 |
| シナリオ情報補完 | **5pt** | 作者情報・リンクなどの追加・修正 |
| ミニカード → 正式変換 | **8pt** | 仮登録を正式レポートに変換する行動 |
| *（将来）イベントボーナス* | *変動* | *キャンペーンやイベントで付与* |

### ポイント計算の注意事項

- 各ボーナスは **1レポートにつき1回のみ** 付与される（重複付与しない）
- レポートを削除した場合、獲得ポイントは **減算しない**（不正防止は別途検討）
- イベントポイントは通常ポイントとは別枠でログに記録する

---

## ランク構成（7段階）

| Rank | 名前 | 必要ポイント | 到達目安 |
|------|------|-------------|----------|
| 1 | **見習い探索者** | 0pt | 即日（登録完了時） |
| 2 | **駆け出し探索者** | 100pt | 数ヶ月 |
| 3 | **探索者** | 400pt | 半年〜1年 |
| 4 | **熟練探索者** | 900pt | 1〜2年 |
| 5 | **古の知識を持つ者** | 1,600pt | 2〜3年 |
| 6 | **深淵を覗いた者** | 2,500pt | 3〜5年 |
| 7 | **旧き印の継承者** | 3,500pt | 5年〜 |

### 到達シミュレーション

**パターンA: 雑登録のみ（10pt/件）**
- Rank 2: 10件、Rank 3: 40件、Rank 4: 90件、Rank 5: 160件、Rank 6: 250件、Rank 7: 350件

**パターンB: 充実レポート + 公開（18pt/件）**
- Rank 2: 6件、Rank 3: 23件、Rank 4: 50件、Rank 5: 89件、Rank 6: 139件、Rank 7: 195件

→ 丁寧に記録する人は **約半分の件数** で同じランクに到達できる。

---

## 充実レポートの定義

以下の **6項目のうち4つ以上** を満たしたレポートを「充実レポート」とする：

| # | 項目 | 条件 |
|---|------|------|
| 1 | 感想 | 50文字以上 |
| 2 | 評価 | 星評価をつけている |
| 3 | タグ | 2個以上 |
| 4 | プレイ日 | 記録している |
| 5 | GM/PL | 記録している |
| 6 | シナリオ作者情報 | 入力している |

---

## 貢献度の段階的要求

| ランク帯 | 必要な貢献 |
|----------|-----------|
| Rank 1〜3 | **不要** — 登録と充実レポートだけで到達可能 |
| Rank 4〜5 | **公開レポート** が必要 — 自分の記録を他プレイヤーに公開する |
| Rank 6〜7 | **公開 + 情報補完** が必要 — コミュニティの情報基盤に貢献する |

> **注意**: 貢献はポイントとして加算されるため、明示的な「条件チェック」ではなく、
> 貢献なしでは必要ポイントに到達しにくい設計になっている。

---

## バッジシステム（将来実装）

- ランク達成時にバッジを獲得できる
- プロフィールの横に数個表示可能にする
- 現時点ではバッジの種類は未定義（ランク実装後に設計する）

---

## 将来のイベント拡張

ポイント制を採用することで、以下のような拡張が可能：

- **期間限定ポイント倍率** — 「今月は登録ポイント2倍！」
- **特別イベントボーナス** — 特定の条件を満たすと追加ポイント付与
- **コラボイベント** — 特定のシナリオ登録で追加ポイント
- **シーズンイベント** — 季節ごとのキャンペーン

---

## 実装方針（メモ）

### データベース

```
explorer_points_log（ポイント獲得ログ）
├── id
├── user_id
├── action_type (report_create, quality_bonus, public_bonus, info_supplement, minicard_convert, event_bonus)
├── points
├── reference_id (対象レポートIDなど)
├── event_id (イベント由来の場合)
├── created_at
└── metadata (JSON)

user_explorer_rank（ユーザーランク情報）※profilesテーブルに追加でもよい
├── user_id
├── total_points
├── current_rank (1-7)
└── updated_at
```

### 処理フロー

```
ユーザーアクション
  → ポイント計算（アクション種別 × 倍率）
  → explorer_points_log に記録
  → total_points を更新
  → ランク閾値と比較
  → ランクアップなら current_rank を更新 + 演出表示
```

### 実装優先度

1. **Phase 1**: ポイントログテーブル・ランクテーブル作成、レポート登録時のポイント付与
2. **Phase 2**: プロフィールにランク表示、ランクアップ演出
3. **Phase 3**: 充実レポート判定、公開ボーナス、情報補完ポイント
4. **Phase 4**: イベントシステム、バッジシステム
